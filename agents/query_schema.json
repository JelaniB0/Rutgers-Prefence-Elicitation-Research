{
  "schema_version": "1.0",
  "description": "Query validation schema for course recommendation system",
  "last_updated": "2024-01-15",
  
  "valid_intents": [
    "course_recommendation",
    "course_info",
    "clarification",
    "general_question",
    "prerequisite_check",
    "schedule_planning",
    "degree_requirements",
    "off_topic"
  ],
  
  "intent_definitions": {
    "course_recommendation": {
      "description": "User wants personalized course suggestions based on interests, year, or goals",
      "examples": [
        "What courses should I take next semester?",
        "I'm interested in AI, what classes do you recommend?",
        "Help me choose courses for my junior year",
        "What courses cover machine learning?",
        "Recommend some courses for web development"
      ],
      "required_entities": ["interests"],
      "optional_entities": ["year", "credit_hours", "career_path", "gpa_priority", "difficulty_preference"],
      "minimum_confidence": 0.5,
      "key_indicators": [
        "recommend",
        "suggest",
        "what courses should",
        "help me choose",
        "what should I take",
        "looking for courses"
      ]
    },
    
    "course_info": {
      "description": "User wants details about a specific course by code or name",
      "examples": [
        "Tell me about CS 111",
        "What does Data Structures cover?",
        "Is Operating Systems hard?",
        "Info on 01:198:112",
        "Describe the Machine Learning course",
        "What's CS 112 about?",
        "Can you explain what happens in Algorithms?"
      ],
      "required_entities": ["specific_courses"],
      "optional_entities": [],
      "minimum_confidence": 0.7,
      "key_indicators": [
        "tell me about",
        "what is",
        "what does",
        "info on",
        "describe",
        "explain",
        "details about",
        "information on"
      ],
      "notes": "This intent is for SPECIFIC course lookups. If user asks 'what courses teach X', that's course_recommendation, not course_info."
    },
    
    "clarification": {
      "description": "User is providing additional information after being asked",
      "examples": [
        "I'm a junior",
        "I want to take 12 credits",
        "I'm interested in machine learning and databases",
        "My career goal is software engineering"
      ],
      "required_entities": [],
      "optional_entities": ["year", "interests", "credit_hours", "career_path", "difficulty_preference", "gpa_priority"],
      "minimum_confidence": 0.4,
      "notes": "Usually follows a clarification question from the system"
    },
    
    "general_question": {
      "description": "User has a general question about CS program or policies",
      "examples": [
        "What are the core CS requirements?",
        "How many electives do I need?",
        "What's the difference between CS and CE?",
        "How does the CS major work?"
      ],
      "required_entities": [],
      "optional_entities": ["year"],
      "minimum_confidence": 0.6
    },
    
    "prerequisite_check": {
      "description": "User wants to verify course eligibility or prerequisites",
      "examples": [
        "Can I take CS 450 if I haven't taken CS 350?",
        "What are the prerequisites for Machine Learning?",
        "Do I need Calculus 2 for Algorithms?",
        "Am I eligible for CS 440?"
      ],
      "required_entities": ["specific_courses"],
      "optional_entities": ["prerequisites_taken"],
      "minimum_confidence": 0.6,
      "key_indicators": [
        "prerequisite",
        "prereq",
        "eligible",
        "can I take",
        "do I need",
        "required for"
      ]
    },
    
    "schedule_planning": {
      "description": "User wants help planning their entire semester schedule",
      "examples": [
        "Help me plan my fall semester",
        "I need a 15 credit schedule",
        "What's a good course load for next term?",
        "Plan my schedule for junior year"
      ],
      "required_entities": ["credit_hours"],
      "optional_entities": ["year", "interests", "time_constraints"],
      "minimum_confidence": 0.5,
      "key_indicators": [
        "plan my schedule",
        "course load",
        "semester planning",
        "credit schedule"
      ]
    },
    
    "degree_requirements": {
      "description": "User wants to know about graduation or degree requirements",
      "examples": [
        "What do I need to graduate?",
        "How many credits for a CS degree?",
        "What are the major requirements?",
        "What classes are required for CS major?"
      ],
      "required_entities": [],
      "optional_entities": ["year"],
      "minimum_confidence": 0.6,
      "key_indicators": [
        "graduate",
        "graduation",
        "degree requirements",
        "major requirements",
        "required courses"
      ]
    },
    
    "off_topic": {
      "description": "Query is not related to CS courses or academic planning",
      "examples": [
        "What's the weather today?",
        "Who won the game last night?",
        "I'm interested in political science",
        "Tell me about environmental science",
        "What's for lunch?"
      ],
      "required_entities": [],
      "optional_entities": [],
      "minimum_confidence": 0.6,
      "notes": "Mark as off_topic if interests are clearly NOT in valid_categories for Computer Science"
    }
  },
  
  "entity_definitions": {
    "year": {
      "type": "categorical",
      "description": "Student's current academic year",
      "valid_values": ["freshman", "sophomore", "junior", "senior", "graduate"],
      "aliases": {
        "freshman": ["freshman", "1st year", "first year", "frosh", "year 1", "1st-year"],
        "sophomore": ["sophomore", "2nd year", "second year", "soph", "year 2", "2nd-year"],
        "junior": ["junior", "3rd year", "third year", "year 3", "3rd-year"],
        "senior": ["senior", "4th year", "fourth year", "year 4", "4th-year"],
        "graduate": ["graduate", "grad student", "masters", "phd", "5th year", "ms", "phd student"]
      },
      "extraction_patterns": [
        "I'm a {year}",
        "I am {year}",
        "as a {year}",
        "{year} student",
        "currently {year}",
        "I'm in my {year} year"
      ]
    },
    
    "interests": {
      "type": "list",
      "description": "CS topics/areas the student is interested in - MUST be Computer Science related",
      "valid_categories": [
        "Artificial Intelligence",
        "Machine Learning",
        "Deep Learning",
        "Data Science",
        "Web Development",
        "Mobile Development",
        "Systems Programming",
        "Operating Systems",
        "Cybersecurity",
        "Information Security",
        "Database Systems",
        "Algorithms",
        "Data Structures",
        "Theory",
        "Theoretical Computer Science",
        "Software Engineering",
        "Computer Graphics",
        "Computer Networks",
        "Distributed Systems",
        "Cloud Computing",
        "DevOps",
        "Game Development",
        "Human-Computer Interaction",
        "Robotics",
        "Natural Language Processing",
        "Computer Vision",
        "Compilers",
        "Programming Languages",
        "Parallel Computing",
        "High Performance Computing",
        "Blockchain",
        "Quantum Computing",
        "Bioinformatics"
      ],
      "keyword_mapping": {
        "Artificial Intelligence": ["ai", "artificial intelligence", "intelligent systems", "expert systems"],
        "Machine Learning": ["ml", "machine learning", "statistical learning", "predictive modeling"],
        "Deep Learning": ["deep learning", "neural networks", "neural nets", "cnn", "rnn", "transformers"],
        "Data Science": ["data science", "data analysis", "big data", "analytics", "data mining"],
        "Web Development": ["web dev", "web development", "frontend", "backend", "full stack", "javascript", "react", "node", "html", "css"],
        "Mobile Development": ["mobile", "mobile dev", "android", "ios", "app development", "mobile apps"],
        "Systems Programming": ["systems", "systems programming", "low-level", "embedded", "firmware"],
        "Operating Systems": ["operating systems", "os", "linux", "unix", "windows"],
        "Cybersecurity": ["security", "cybersecurity", "infosec", "ethical hacking", "penetration testing", "pen testing", "cryptography"],
        "Information Security": ["information security", "cyber defense", "security analysis"],
        "Database Systems": ["databases", "db", "sql", "nosql", "data management", "mongodb", "postgresql"],
        "Algorithms": ["algorithms", "algorithmic", "algo"],
        "Data Structures": ["data structures", "data structure", "trees", "graphs", "linked lists"],
        "Theory": ["theory", "theoretical cs", "computational theory", "complexity", "automata"],
        "Theoretical Computer Science": ["theoretical computer science", "complexity theory", "computability"],
        "Software Engineering": ["software engineering", "swe", "agile", "software design", "software architecture", "design patterns"],
        "Computer Graphics": ["graphics", "computer graphics", "3d", "rendering", "visualization", "opengl", "webgl"],
        "Computer Networks": ["networks", "networking", "tcp/ip", "protocols"],
        "Distributed Systems": ["distributed systems", "distributed computing", "microservices"],
        "Cloud Computing": ["cloud", "aws", "azure", "gcp", "cloud computing", "serverless"],
        "DevOps": ["devops", "ci/cd", "docker", "kubernetes", "containerization", "deployment"],
        "Game Development": ["game dev", "game development", "unity", "unreal", "game design", "game programming"],
        "Human-Computer Interaction": ["hci", "ux", "ui", "user experience", "interaction design", "usability"],
        "Robotics": ["robotics", "autonomous systems", "robot", "automation"],
        "Natural Language Processing": ["nlp", "natural language", "text processing", "language models", "llm"],
        "Computer Vision": ["computer vision", "cv", "image processing", "image recognition", "object detection"],
        "Compilers": ["compilers", "compiler design", "interpreters", "parsing"],
        "Programming Languages": ["programming languages", "language design", "pl"],
        "Parallel Computing": ["parallel computing", "parallel programming", "concurrency", "multithreading"],
        "High Performance Computing": ["hpc", "high performance computing", "supercomputing"],
        "Blockchain": ["blockchain", "cryptocurrency", "bitcoin", "ethereum", "smart contracts"],
        "Quantum Computing": ["quantum computing", "quantum algorithms", "qubits"],
        "Bioinformatics": ["bioinformatics", "computational biology", "genomics"]
      },
      "extraction_patterns": [
        "interested in {interests}",
        "like {interests}",
        "want to learn {interests}",
        "focus on {interests}",
        "passionate about {interests}",
        "enjoy {interests}",
        "curious about {interests}",
        "exploring {interests}"
      ],
      "extraction_rules": {
        "do_not_extract": [
          "Computer Science",
          "CS",
          "computing"
        ],
        "note": "If user only says 'Computer Science' or 'CS' with no specific topics, DO NOT extract as interest. Set needs_clarification=true instead."
      }
    },
    
    "credit_hours": {
      "type": "numeric",
      "description": "Number of credit hours student wants to take",
      "valid_range": {
        "min": 3,
        "max": 21,
        "typical": [12, 15, 18]
      },
      "extraction_patterns": [
        "{number} credits",
        "{number} credit hours",
        "{number} units",
        "take {number} credits",
        "{number} credit"
      ]
    },
    
    "career_path": {
      "type": "text",
      "description": "Student's intended career direction",
      "common_paths": [
        "Software Engineer",
        "Data Scientist",
        "Machine Learning Engineer",
        "AI Engineer",
        "Web Developer",
        "Full Stack Developer",
        "Frontend Developer",
        "Backend Developer",
        "Mobile Developer",
        "DevOps Engineer",
        "Security Analyst",
        "Security Engineer",
        "Database Administrator",
        "Systems Administrator",
        "Research Scientist",
        "Product Manager",
        "UX Designer",
        "UI Designer",
        "Game Developer",
        "Cloud Architect",
        "Data Engineer",
        "Site Reliability Engineer"
      ],
      "extraction_patterns": [
        "want to be a {career}",
        "become a {career}",
        "career in {career}",
        "work as a {career}",
        "interested in {career} role",
        "goal is {career}",
        "pursuing {career}"
      ]
    },
    
    "gpa_priority": {
      "type": "categorical",
      "description": "How much the student prioritizes GPA vs. learning",
      "valid_values": ["high", "medium", "low"],
      "indicators": {
        "high": [
          "need good grades",
          "maintain gpa",
          "important for grad school",
          "keep my grades up",
          "gpa matters",
          "competitive",
          "need high gpa",
          "grades are important"
        ],
        "medium": [
          "balanced",
          "moderate challenge",
          "some challenge okay",
          "reasonable difficulty"
        ],
        "low": [
          "want to be challenged",
          "learning over grades",
          "don't care about gpa",
          "want hard courses",
          "challenge me",
          "grades don't matter",
          "want to learn"
        ]
      }
    },
    
    "specific_courses": {
      "type": "list",
      "description": "Specific course codes or names mentioned by the student",
      "course_code_patterns": [
        "^[A-Z]{2,4}\\s?\\d{3,4}[A-Z]?$",
        "^\\d{2}:\\d{3}:\\d{3}$",
        "^CS\\s?\\d{3}$",
        "^01:198:\\d{3}$"
      ],
      "examples": [
        "CS 111",
        "CS111", 
        "01:198:112",
        "DATA 301",
        "MATH 241",
        "CS450",
        "Data Structures",
        "Machine Learning",
        "Operating Systems"
      ],
      "extraction_patterns": [
        "{COURSE_CODE}",
        "{course_name}",
        "course {COURSE_CODE}",
        "class {COURSE_CODE}",
        "{COURSE_CODE} course"
      ],
      "extraction_rules": {
        "normalize": "Remove extra spaces, convert to uppercase for codes",
        "title_matching": "Match common course titles like 'Data Structures', 'Algorithms', 'Machine Learning'",
        "context": "Only extract if user is asking about a SPECIFIC course, not a topic area"
      }
    },
    
    "prerequisites_taken": {
      "type": "list",
      "description": "Courses the student has already completed",
      "extraction_patterns": [
        "already took {courses}",
        "completed {courses}",
        "finished {courses}",
        "taken {courses}",
        "have taken {courses}",
        "done with {courses}"
      ]
    },
    
    "difficulty_preference": {
      "type": "categorical",
      "description": "Preferred course difficulty level",
      "valid_values": ["easy", "moderate", "challenging"],
      "indicators": {
        "easy": ["easy", "light", "not too hard", "manageable", "simple", "straightforward", "gentle"],
        "moderate": ["moderate", "medium difficulty", "balanced", "reasonable", "average"],
        "challenging": ["challenging", "hard", "difficult", "rigorous", "advanced", "tough", "demanding"]
      }
    },
    
    "time_constraints": {
      "type": "text",
      "description": "Schedule preferences or constraints",
      "common_patterns": [
        "no early morning classes",
        "no morning classes",
        "only MWF",
        "only Monday Wednesday Friday",
        "only Tuesday Thursday",
        "only TR",
        "afternoon classes",
        "evening classes",
        "online only",
        "in-person only",
        "remote",
        "no Friday classes"
      ]
    },
    
    "professor_preference": {
      "type": "list",
      "description": "Preferred or avoided professors",
      "extraction_patterns": [
        "professor {name}",
        "taught by {name}",
        "avoid {name}",
        "not {name}",
        "with professor {name}"
      ]
    }
  },
  
  "validation_rules": {
    "course_recommendation": {
      "minimum_confidence": 0.5,
      "required_entity_combinations": [
        ["interests"],
        ["year", "interests"],
        ["interests", "credit_hours"],
        ["year", "credit_hours", "interests"]
      ],
      "validation_messages": {
        "missing_year": "To recommend courses, I need to know what year you're in.",
        "missing_interests": "What CS topics are you interested in?",
        "missing_credit_hours": "How many credit hours are you planning to take?"
      }
    },
    "course_info": {
      "minimum_confidence": 0.7,
      "required_entity_combinations": [
        ["specific_courses"]
      ],
      "validation_messages": {
        "missing_courses": "Which course would you like to know about?"
      }
    },
    "prerequisite_check": {
      "minimum_confidence": 0.6,
      "required_entity_combinations": [
        ["specific_courses"]
      ],
      "validation_messages": {
        "missing_courses": "Which course are you asking about?"
      }
    },
    "schedule_planning": {
      "minimum_confidence": 0.5,
      "required_entity_combinations": [
        ["year", "credit_hours"],
        ["credit_hours", "interests"]
      ]
    }
  },
  
  "invalid_query_patterns": [
    {
      "category": "homework_help",
      "keywords": [
        "do my homework",
        "solve this problem",
        "answer key",
        "solution to problem",
        "help with assignment",
        "complete my project",
        "write my code"
      ],
      "confidence_threshold": 0.7,
      "error_message": "I can help with course selection, but I cannot help with homework or assignments."
    },
    {
      "category": "exam_cheating",
      "keywords": [
        "exam answers",
        "test solutions",
        "cheat on exam",
        "quiz answers",
        "exam questions",
        "test questions"
      ],
      "confidence_threshold": 0.8,
      "error_message": "I cannot provide exam answers or help with academic dishonesty."
    },
    {
      "category": "off_topic",
      "keywords": [
        "weather",
        "sports",
        "politics",
        "cooking",
        "fashion",
        "dating",
        "travel",
        "movies",
        "music",
        "games",
        "environmental science",
        "political science",
        "biology",
        "chemistry",
        "physics",
        "history",
        "economics",
        "psychology"
      ],
      "confidence_threshold": 0.6,
      "error_message": "I'm a course recommendation assistant for Rutgers CS. Please ask questions related to Computer Science course selection and academic planning."
    },
    {
      "category": "spam",
      "keywords": [
        "buy now",
        "click here",
        "free money",
        "limited offer",
        "act now",
        "earn cash"
      ],
      "confidence_threshold": 0.9,
      "error_message": "Invalid query detected."
    },
    {
      "category": "personal_info_request",
      "keywords": [
        "give me your password",
        "admin access",
        "database credentials",
        "student records",
        "grades database",
        "access database"
      ],
      "confidence_threshold": 0.8,
      "error_message": "I cannot provide access to private systems or information."
    }
  ],
  
  "course_related_keywords": [
    "course", "class", "semester", "credit", "credits", "major", "degree",
    "cs", "computer science", "programming", "algorithm", "data structures",
    "software", "take", "enroll", "register", "schedule", "prerequisite",
    "requirement", "elective", "core", "year", "junior", "senior",
    "freshman", "sophomore", "recommend", "suggest", "help", "planning",
    "graduation", "transcript", "gpa", "grade", "professor", "instructor",
    "syllabus", "curriculum", "catalog", "machine learning", "ai", "web",
    "mobile", "security", "database", "networks", "systems", "theory",
    "graphics", "robotics", "nlp", "vision", "compiler"
  ],
  
  "confidence_calculation": {
    "weights": {
      "intent_clarity": 0.3,
      "entity_completeness": 0.3,
      "course_keyword_presence": 0.2,
      "schema_match": 0.2
    },
    "thresholds": {
      "high_confidence": 0.8,
      "medium_confidence": 0.5,
      "low_confidence": 0.3
    },
    "adjustments": {
      "specific_courses_present": "+0.2 confidence for course_info intent",
      "only_generic_cs_interest": "-0.3 confidence, set needs_clarification=true",
      "off_topic_keywords": "Set intent to off_topic if confidence > 0.6"
    }
  },
  
  "response_templates": {
    "needs_clarification": {
      "low_confidence": "I'm not sure I understand. Are you asking about course recommendations?",
      "missing_entities": "To help you better, I need to know: {missing_fields}",
      "ambiguous_intent": "Are you asking about {option1} or {option2}?",
      "generic_cs_interest": "I'd love to help you find CS courses! Could you tell me what specific areas interest you? For example: AI, web development, cybersecurity, databases, etc."
    },
    "invalid_query": {
      "off_topic": "I'm here to help with Rutgers Computer Science course selection and academic planning. Could you ask a question related to CS courses?",
      "inappropriate": "Please ensure your query is appropriate and related to academic advising.",
      "too_vague": "Could you provide more details about what you're looking for?"
    },
    "course_not_found": {
      "default": "I couldn't find a course called '{course_identifier}' in the Rutgers CS catalog. Could you double-check the course code or name?",
      "suggestion": "You can also try asking 'what courses cover {topic}' to browse related courses."
    }
  },
  
  "intent_disambiguation_rules": {
    "course_info_vs_recommendation": {
      "rule": "If user mentions a specific course code or exact course name, use course_info. If user asks about courses in a topic area, use course_recommendation.",
      "examples": {
        "course_info": [
          "Tell me about CS 111",
          "What's Data Structures about?",
          "Is Operating Systems hard?"
        ],
        "course_recommendation": [
          "What courses teach data structures?",
          "I want to learn about operating systems",
          "Recommend courses in AI"
        ]
      }
    }
  }
}